
Has de crear un xacro:macro, tipus així:

<xacro:macro name="omniwheel" params="name parent *origin">
	<joint name="${name}" type="continuous" >
		<parent link="${parent}"/>
		<child link="${name}_hinge"/>
		<xacro:insert_block name="origin"/>
		<axis xyz="0 0 1"/>
		<limit effort="100000." velocity="${2*pi}"/>
		<dynamics friction="0.01" damping="0.001"/>
	</joint>

	<!-- TOT EL QUE TENS COM A OMNI WHEEL HAURIA D'ANAR AQUI -->
	<link name="${name}_frame">
		<visual>
			<origin rpy="1.57075 0 0" xyz="-0.238 0 0.06250"/>
			<geometry>
				<mesh filename="package://robot/meshes/omniwheel.stl"/>
			</geometry>
			<color rgba="0 0 0.8 1"/>
		</visual>
	</link>

	<joint name="${name}_rodeta_1_joint" type="continuous">
		<parent link="${name}_frame"/>
		<child link="${name}_rodeta_1"/>
		<axis xyz="-0.328 0 0.01 "/>
		<origin xyz="0 1 0 "/>
	</joint>

	<link name="${name}_rodeta_1">
		<visual>
			<origin rpy="0 0 0" xyz="-0.238 0 0.01"/>
			<geometry>
				<mesh filename="package://robot/meshes/rodeta.stl"/>
			</geometry>
			<color rgba="${255/255} ${108/255} ${10/255} 1.0"/>
		</visual>
	</link>
</xacro:macro>

Si et fixes, el macro té 3 paràmetres, el nom que s'arrastra a tots els elements del macro per fer-los ùnics, el parent, que identifica el cos anterior al que connectes la roda, i origin que diu on la conectes al cos parent. Un vegada has definit una omniwheel com a macro, la fas servir així per exmple:

<link name="world">
<xacro:omniwheel name="MY_WHEEL_ONE" parent="world">
	<origin xyz="0 0.1 0.5" rpy="${0.5*pi} 0 ${pi}"/>
</xacro:omniwheel>
<xacro:omniwheel name="MY_WHEEL_TWO" parent="world">
	<origin xyz="0 -0.1 0.5" rpy="${pi} 0 ${0.5*pi}"/>
</xacro:omniwheel>
<xacro:omniwheel name="MY_WHEEL_THREE" parent="world">
	<origin xyz="0 -0.1 -0.5" rpy="0 0 0"/>
</xacro:omniwheel>
 

    2_ axis origin i axis xyz, quan les rodetes estan en vertical i horitzontal ja esta fet, però quan estan a 45º graus no acabo d'entendre com definir-ho.


No el faxis amb l'axis del joint, deixa l'axis de totes les rodetes per exemple en 0 0 1 (en "z"), i mous l'origin del joint en xyz i rpy per vagin girant al voltant de la roda.
 

    3_ com puc eliminar el blanc del stl, ara encara pq hi ha poques peces però quan és compliqui la cosa no veure gaire res.


Aqui s'explica com pots canviar el color dels links:
http://wiki.ros.org/urdf/XML/link
 

     