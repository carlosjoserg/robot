<?xml version="1.0"?>
<robot name="spm_1" xmlns:xacro="http://www.ros.org/wiki/xacro">


  <xacro:property name="pi" value="3.141592" />
    <xacro:property name="c120" value="-0.5" />
    <xacro:property name="s120" value="0.866025404" />
    <xacro:property name="c45" value="0.707106781" />
    <xacro:property name="s45" value="0.707106781" />
    <xacro:property name="c90" value="0" />
    <xacro:property name="s90" value="1" />
    <xacro:property name="s30" value="0.5" />


<xacro:macro name="arm_assembly" params="name parent *origin">

  <joint name="${name}" type="continuous" >
    <parent link="${parent}"/>
    <child link="${name}"/>
    <xacro:insert_block name="origin"/>
    <axis xyz=" 0 0 1"/>
    <limit effort="100000." velocity="${2*pi}"/>
    <dynamics friction="0.01" damping="0.001"/>
  </joint>
   
    

    <link name="${name}_stepper_motor">
    <visual>
      <origin rpy="0 0 0" xyz="0 0 0 "/>
      <geometry>
         <mesh filename="package://robot/meshes/motor.stl" scale="0.001 0.001 0.001"/>
      </geometry>
      <material name="motor">
        <color rgba="${192/255} ${192/255} ${192/255} 1.0"/>
      </material>
    </visual>
    <collision>
     <origin xyz="0 0.14479 0.05685" rpy=" ${-112.5*pi/180} 0 0"/>
     <geometry>
     <cylinder length="0.034" radius="0.016"/>
     </geometry>
     <material name="orange_collision">
       <color rgba="${255/255} ${153/255} ${51/255} 1.0"/>
     </material>
    </collision>
  <inertial>
    <mass value="0.1"/>
    <inertia ixx="0.00000442" ixy="0" ixz="0" iyy="0.00000442" iyz="0" izz="0.00000063"/>
  </inertial>
  </link>

 <joint name="${name}_stepper_motor_to_motor_axis" type="continuous">
    <parent link="${name}_stepper_motor"/>
    <child link="${name}_motor_axis"/>
    <axis xyz="0 0 1" />
    <origin rpy= "0 0 0" xyz="0 0 0" />
  </joint>

 <link name="${name}_motor_axis">
    <visual>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
         <mesh filename="package://robot/meshes/eix_motor.stl" scale="0.001 0.001 0.001"/>
      </geometry>
      <material name="motor">
        <color rgba="${192/255} ${192/255} ${192/255} 1.0"/>
      </material>
    </visual>
    <collision>
     <origin xyz="0 0 -0.00439 " rpy=" 0 0 0"/>
     <geometry>
     <cylinder length="0.01" radius="0.0015"/>
     </geometry>
     <material name="orange_collision">
     </material>
    </collision>
  <inertial>
    <mass value="0.010"/>
    <inertia ixx="0" ixy="0" ixz="0" iyy="0" iyz="0" izz="0"/>
  </inertial>    
  </link>

 <joint name="${name}_motor_axis_to_arm_1" type="fixed">
    <parent link="${name}_stepper_motor"/>
    <child link="${name}_arm_1"/>
    <axis xyz="0 0 1" />
    <origin rpy= "${-112.5*pi/180} 0 0" xyz="0 0.12926 0.06335" />
  </joint> 
 

<link name="${name}_arm_1">
    <visual>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="package://robot/meshes/inferior_arm.stl" scale="0.001 0.001 0.001"/>
      </geometry>
      <material name="arm_1">
        <color rgba="${255/255} ${153/255} ${51/255} 1.0"/>
     </material>
    </visual>
     <collision>
      <geometry>
        <mesh filename="package://robot/meshes/inferior_arm.stl" scale="0.001 0.001 0.001"/>
      </geometry>
      <material 
        name="orange_collision">
     </material>
    </collision>
    <inertial>
      <mass value="0.02"/>
      <inertia ixx="0.00000384" ixy="0" ixz="0.00000566" iyy="0.00002011" iyz="0" izz="0.00001923"/>
    </inertial>
  </link>

 <joint name="${name}_arm_1_to_arm_2" type="revolute">
    <parent link="${name}_arm_1"/>
    <child link="${name}_arm_2"/>
    <axis xyz="0 0 1"/>
    <origin rpy="0 0 0" xyz="0 0 0"/>
    <limit effort="100000" lower="${-45*pi/180}" upper="${45*pi/180}" velocity="${2*pi}"/>
    <dynamics friction="0.01" damping="0.001"/> 
  </joint>


   <link name="${name}_arm_2">
    <visual>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="package://robot/meshes/as.stl" scale="0.001 0.001 0.001"/>
      </geometry>
          <material name="arm_2">
        <color rgba="${150/255} ${150/255} ${50/255} 1.0"/>
     </material>
    </visual>
         <collision>
      <geometry>
        <mesh filename="package://robot/meshes/as.stl" scale="0.001 0.001 0.001"/>
      </geometry>
    </collision>
    <material 
        name="orange_collision">
     </material>
    <inertial>
      <mass value="0.008"/>
      <inertia ixx="0.00001720" ixy="0" ixz="0" iyy="0.00000114" iyz="0.00000039" izz="0.00001736"/>
    </inertial>
  </link>

   <joint name="${name}_arm_2_to_axis_arm_2" type="revolute">
    <parent link="${name}_arm_1"/>
    <child link="${name}_arm_2"/>
    <axis xyz="0 0 1"/>
    <origin rpy= "${22.5*pi/180} 0 0" xyz="0 -0.05327 -0.01067" />
    <limit effort="100000" lower="${-45*pi/180}" upper="${45*pi/180}" velocity="${2*pi}"/>
    <dynamics friction="0.01" damping="0.001"/>
  </joint>

     <link name="${name}_axis_arm_2">
        <visual>
          <geometry>
            <cylinder length="0.01" radius="0.002"/>
          </geometry>
          <origin rpy="0 0 0" xyz="0 0 0"/>
      <material name="arm_2"/>
        </visual>
      <collision>
        <origin xyz="0 0 -0.00439" rpy=" 0 0 0"/>
        <geometry>
        <cylinder length="0.01" radius="0.0015"/>
        </geometry>
        <material 
          name="orange_collision">
        </material>
      </collision>
  <inertial>
    <mass value="0.010"/>
    <inertia ixx="0" ixy="0" ixz="0" iyy="0" iyz="0" izz="0"/>
  </inertial>
      </link>


</xacro:macro>

       <!-- <link name="base" /> -->

<xacro:arm_assembly name="ARM_ASSEMBLY_ONE" parent="base">
  <origin rpy="0 0 0" xyz="0.5 0 0"  />
</xacro:arm_assembly>
<xacro:arm_assembly name="ARM_ASSEMBLY_TWO" parent="base">
  <origin rpy="0 0 ${120*pi/180}" xyz="0 0 0" />
</xacro:arm_assembly>
<xacro:arm_assembly name="ARM_ASSEMBLY_THREE" parent="base">
  <origin rpy="0 0 ${-120*pi/180}" xyz="0 0 0" />
</xacro:arm_assembly>


   <link name="plat_superior">
    <visual>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="package://robot/meshes/plat_superior.stl" scale="0.001 0.001 0.001"/>
      </geometry>
          <material name="arm_2">
        <color rgba="${150/255} ${150/255} ${50/255} 1.0"/>
     </material>
    </visual>
    <collision>
      <origin xyz="0 0 0.037" rpy="0 0 0" />
      <geometry>
        <cylinder length="0.050" radius="0.125"/>
      </geometry>
    </collision>
    <material 
        name="orange_collision">
     </material>
    <inertial>
        <mass value="0.0679"/>
      <inertia ixx="0.00035045" ixy="0" ixz="0" iyy="0.00035046" iyz="0" izz="0.00041102"/>
    </inertial>
  </link>

     <joint name="plat_superior_joint" type="fixed">
     <parent link="axis_arm_2"/>
     <child link="plat_superior"/>
     <axis xyz="0 1 0 "/>
     <origin xyz="0 0 0.13855" rpy= "${247.5*pi/180} 0 0"/>
    </joint> 

  
</robot>